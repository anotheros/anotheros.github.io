/*! MIT license, more info: wgo.waltheri.net *//*
 Copyright (c) 2013 Jan Prokop

 Permission is hereby granted, free of charge, to any person obtaining a copy of this
 software and associated documentation files (the "Software"), to deal in the Software
 without restriction, including without limitation the rights to use, copy, modify, merge,
 publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons
 to whom the Software is furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in all copies or
 substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING
 BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
 DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/
(function(y,r){var l=document.getElementsByTagName("script"),g={version:"2.3.1",B:1,W:-1,ERROR_REPORT:!0,DIR:l[l.length-1].src.split("?")[0].split("/").slice(0,-1).join("/")+"/",lang:"en",i18n:{en:{}}};g.opera=-1!=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i);g.webkit=-1!=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i);g.msie=-1!=navigator.userAgent.search(/(msie) ([\w.]+)/i);g.mozilla=-1!=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)&&!g.webkit&&!g.msie;g.t=
function(a){var b=g.i18n[g.lang][a]||g.i18n.en[a];if(b){for(var c=1;c<arguments.length;c++)b=b.replace("$",arguments[c]);return b}return a};g.extendClass=function(a,b){b.prototype=Object.create(a.prototype);b.prototype.constructor=b;b.prototype.super=a;return b};g.abstractMethod=function(){throw Error("unimplemented abstract method");};g.clone=function(a){if(a&&"object"==typeof a){var b=a.constructor==Array?[]:{},c;for(c in a)b[c]=a[c]==a?a:g.clone(a[c]);return b}return a};g.filterHTML=function(a){return a&&
"string"==typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a};var h=function(a,b){b=b||{};for(var c in b)this[c]=b[c];for(c in g.Board.default)this[c]===r&&(this[c]=g.Board.default[c]);for(c in h.themes.default)this.theme[c]===r&&(this.theme[c]=h.themes.default[c]);this.tx=this.section.left;this.ty=this.section.top;this.bx=this.size-1-this.section.right;this.by=this.size-1-this.section.bottom;this.init();a.appendChild(this.element);this.pixelRatio=y.devicePixelRatio||1;this.width&&this.height?
this.setDimensions(this.width,this.height):this.width?this.setWidth(this.width):this.height&&this.setHeight(this.height)};h.themes={};h.themes.old={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,shadowSize:function(a){return a.shadowSize},markupBlackColor:"rgba(255,255,255,1.0)",markupWhiteColor:"rgba(0,0,0,1.0)",markupNoneColor:"rgba(0,0,0,0.8)",markupLinesWidth:function(a){return a.autoLineWidth?a.stoneRadius/7:a.lineWidth},gridLinesWidth:1,gridLinesColor:function(a){return"rgba(0,0,0,"+
Math.min(1,a.stoneRadius/15)+")"},starColor:"#000",starSize:function(a){return a.starSize*(a.width/300+1)},stoneSize:function(a){return a.stoneSize*Math.min(a.fieldWidth,a.fieldHeight)/2},coordinatesColor:"rgba(0,0,0,0.7)",font:function(a){return a.font},linesShift:.5};h.themes.default={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(a){return.1*a.stoneRadius},shadowSize:1,markupBlackColor:"rgb(255,255,255)",markupWhiteColor:"rgb(0,0,0)",markupNoneColor:"rgba(0,0,0,0.7)",
markupLinesWidth:function(a){return a.stoneRadius/8},gridLinesWidth:function(a){return a.stoneRadius/15},gridLinesColor:"#654525",starColor:"#531",starSize:function(a){return a.stoneRadius/8+1},stoneSize:function(a){return Math.min(a.fieldWidth,a.fieldHeight)/2},coordinatesColor:"#531",variationColor:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var k=function(a,b){return"function"==typeof b.theme[a]?b.theme[a](b):b.theme[a]};l={draw:function(a,b){if(a.c&&!(g.display_var_length&&0<g.display_var_length&&
a.num>g.display_var_length)){var c=b.getX(a.x);a=b.getY(a.y);var e=b.stoneRadius;this.beginPath();var d=k("shadowBlur",b);e=Math.max(0,e-.5);var f=this.createRadialGradient(c-b.ls,a-b.ls,e-1-d,c-b.ls,a-b.ls,e+d);f.addColorStop(0,k("shadowColor",b));f.addColorStop(1,k("shadowTransparentColor",b));this.fillStyle=f;this.arc(c-b.ls,a-b.ls,e+d,0,2*Math.PI,!0);this.fill()}},clear:function(a,b){var c=b.getX(a.x);a=b.getY(a.y);var e=b.stoneRadius;this.clearRect(c-1.1*e-b.ls,a-1.1*e-b.ls,2.2*e,2.2*e)}};var F=
{draw:function(a,b){if(a.c&&!(g.display_var_length&&0<g.display_var_length&&a.num>g.display_var_length)){var c=b.getX(a.x);a=b.getY(a.y);var e=b.stoneRadius;this.beginPath();e=Math.max(0,.85*(e-.5));var d=this.createRadialGradient(c- -1.5,a- -2,e-1-4.5,c- -1.5,a- -2,e+4.5);d.addColorStop(0,k("shadowColor",b));d.addColorStop(1,k("shadowTransparentColor",b));this.fillStyle=d;this.arc(c- -1.5,a- -2,e+4.5,0,2*Math.PI,!0);this.fill()}},clear:function(a,b){if(a.c){var c=b.getX(a.x);a=b.getY(a.y);b=b.stoneRadius;
this.clearRect(c-1.1*b-1,a-1.1*b- -5,2.2*b,2.2*b)}}},p=function(a,b,c){return a.obj_arr[b][c][0].c==g.B?k("markupBlackColor",a):a.obj_arr[b][c][0].c==g.W?k("markupWhiteColor",a):k("markupNoneColor",a)},z=function(a,b,c){return a.obj_arr[b][c][0]&&a.obj_arr[b][c][0].c==g.W||a.obj_arr[b][c][0].c==g.B},G=function(a,b){a[b].clear();a[b].draw(a);for(var c=0;c<a.size;c++)for(var e=0;e<a.size;e++)for(var d=0;d<a.obj_arr[c][e].length;d++){var f=a.obj_arr[c][e][d];var g=f.type?"string"==typeof f.type?h.drawHandlers[f.type]:
f.type:a.stoneHandler;g[b]&&g[b].draw.call(a[b].getContext(f),f,a)}for(c=0;c<a.obj_list.length;c++)f=a.obj_list[c],g=f.handler,g[b]&&g[b].draw.call(a[b].getContext(f.args),f.args,a)},A,B=function(a){for(var b=a.angle,c=a.angle,e=0;e<a.lines.length;e++){b+=a.lines[e];c-=a.lines[e];var d=a.ctx,f=a.x,g=a.y;var m=a.radius;var h=b;var k=c;var l=a.factor,q=a.thickness;d.strokeStyle="rgba(64,64,64,0.2)";d.lineWidth=m/30*q;d.beginPath();m-=Math.max(1,d.lineWidth);q=f+m*Math.cos(h*Math.PI);h=g+m*Math.sin(h*
Math.PI);f+=m*Math.cos(k*Math.PI);g+=m*Math.sin(k*Math.PI);k=f>q?Math.atan((g-h)/(f-q)):f==q?Math.PI/2:Math.atan((g-h)/(f-q))-Math.PI;l*=m;m=Math.sin(k)*l;var p=Math.cos(k)*l;l=q+m;k=h-p;m=f+m;p=g-p;d.moveTo(q,h);d.bezierCurveTo(l,k,m,p,f,g);d.stroke()}};h.drawHandlers={NORMAL:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;if(a.c==g.W){var f=this.createRadialGradient(c-2*d/5,e-2*d/5,d/3,c-d/5,e-d/5,5*d/5);f.addColorStop(0,"#fff");f.addColorStop(1,"#aaa")}else f=this.createRadialGradient(c-
2*d/5,e-2*d/5,1,c-d/5,e-d/5,4*d/5),f.addColorStop(0,"#666"),f.addColorStop(1,"#000");this.beginPath();this.fillStyle=f;this.arc(c-b.ls,e-b.ls,Math.max(0,d-.5),0,2*Math.PI,!0);this.fill();this.fillStyle=a.c==g.W?"black":"white"}},shadow:l},PAINTED:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;if(a.c==g.W){var f=this.createRadialGradient(c-2*d/5,e-2*d/5,2,c-d/5,e-d/5,4*d/5);f.addColorStop(0,"#fff");f.addColorStop(1,"#ddd")}else f=this.createRadialGradient(c-2*d/5,e-2*d/
5,1,c-d/5,e-d/5,4*d/5),f.addColorStop(0,"#111"),f.addColorStop(1,"#000");this.beginPath();this.fillStyle=f;this.arc(c-b.ls,e-b.ls,Math.max(0,d-.5),0,2*Math.PI,!0);this.fill();this.beginPath();this.lineWidth=d/6;a.c==g.W?(this.strokeStyle="#999",this.arc(c+d/8,e+d/8,d/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(c-d/8,e-d/8,d/2,Math.PI,1.5*Math.PI));this.stroke()}},shadow:F},REALISTIC:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius,f=b.whiteStoneGraphic.length,n=
b.blackStoneGraphic.length;"undefined"===typeof this.randIndex&&(this.randIndex=Math.ceil(1E5*Math.random()));var m=function(){b.redraw()},k=function(a){return"string"===typeof a||!a.complete||"undefined"!=typeof a.naturalWidth&&0==a.naturalWidth?!1:!0};a.c==g.W?(f=this.randIndex%f,"string"===typeof b.whiteStoneGraphic[f]&&(n=new Image,n.onload=m,n.src=b.whiteStoneGraphic[f],b.whiteStoneGraphic[f]=n),k(b.whiteStoneGraphic[f])?this.drawImage(b.whiteStoneGraphic[f],c-d,e-d,2*d,2*d):h.drawHandlers.SHELL.stone.draw.call(this,
a,b)):(f=this.randIndex%n,"string"===typeof b.blackStoneGraphic[f]&&(n=new Image,n.onload=m,n.src=b.blackStoneGraphic[f],b.blackStoneGraphic[f]=n),k(b.blackStoneGraphic[f])?this.drawImage(b.blackStoneGraphic[f],c-d,e-d,2*d,2*d):h.drawHandlers.SHELL.stone.draw.call(this,a,b))}},shadow:F},GLOW:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;a.c==g.W?(a=this.createRadialGradient(c-2*d/5,e-2*d/5,d/3,c-d/5,e-d/5,8*d/5),a.addColorStop(0,"#fff"),a.addColorStop(1,"#666")):(a=this.createRadialGradient(c-
2*d/5,e-2*d/5,1,c-d/5,e-d/5,3*d/5),a.addColorStop(0,"#555"),a.addColorStop(1,"#000"));this.beginPath();this.fillStyle=a;this.arc(c-b.ls,e-b.ls,Math.max(0,d-.5),0,2*Math.PI,!0);this.fill()}},shadow:l},SHELL:{stone:{draw:function(a,b){var c=b.stoneRadius;A=A||Math.ceil(9999999*Math.random());var e=b.getX(a.x);var d=b.getY(a.y);var f=a.c==g.W?"#aaa":"#000";this.beginPath();this.fillStyle=f;this.arc(e-b.ls,d-b.ls,Math.max(0,c-.5),0,2*Math.PI,!0);this.fill();a.c==g.W?(f=A%(3+a.x*b.size+a.y)%3,a=b.size*
b.size+a.x*b.size+a.y,a=2/a*(A%a),0==f?B({ctx:this,x:e,y:d,radius:c,ansgfgle:a,lines:[.1,.12,.11,.1,.09,.09,.09,.09],factor:.25,thickness:1.75}):1==f?B({ctx:this,x:e,y:d,radius:c,angle:a,lines:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],factor:.2,thickness:1.5}):B({ctx:this,x:e,y:d,radius:c,angle:a,lines:[.12,.14,.13,.12,.12,.12],factor:.3,thickness:2}),f=this.createRadialGradient(e-2*c/5,d-2*c/5,c/3,e-c/5,d-c/5,5*c/5),f.addColorStop(0,"rgba(255,255,255,0.9)"),f.addColorStop(1,"rgba(255,255,255,0)")):
(f=this.createRadialGradient(e+.4*c,d+.4*c,0,e+.5*c,d+.5*c,c),f.addColorStop(0,"rgba(32,32,32,1)"),f.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=f,this.arc(e-b.ls,d-b.ls,Math.max(0,c-.5),0,2*Math.PI,!0),this.fill(),f=this.createRadialGradient(e-.4*c,d-.4*c,1,e-.5*c,d-.5*c,1.5*c),f.addColorStop(0,"rgba(64,64,64,1)"),f.addColorStop(1,"rgba(0,0,0,0)"));this.beginPath();this.fillStyle=f;this.arc(e-b.ls,d-b.ls,Math.max(0,c-.5),0,2*Math.PI,!0);this.fill()}},shadow:l},MONO:{stone:{draw:function(a,
b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;b=k("markupLinesWidth",b)||1;this.fillStyle=a.c==g.W?"white":"black";this.beginPath();this.arc(c,e,Math.max(0,d-b),0,2*Math.PI,!0);this.fill();this.lineWidth=b;this.strokeStyle="black";this.stroke()}}},CR:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;this.fillStyle="red";this.beginPath();this.moveTo(c-b.ls+1.1*d,e-b.ls-1.1*d);this.lineTo(c-b.ls+.3*d,e-b.ls-1.1*d);this.lineTo(c-b.ls+1.1*d,e-b.ls-.3*d);this.fill();this.strokeStyle=
a.c==g.B?"rgb(0,0,0)":"rgb(255,255,255)";this.lineWidth=.5;this.beginPath();this.arc(c-b.ls,e-b.ls,d,0,2*Math.PI,!0);this.stroke()}}},CRS:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;this.strokeStyle=a.c==g.B?"rgb(0,0,0)":"rgb(255,255,255)";this.lineWidth=a.lineWidth||k("markupLinesWidth",b)||1;this.beginPath();this.arc(c-b.ls,e-b.ls,d+1,0,2*Math.PI,!0);this.stroke()}}},CR2:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;this.strokeStyle="rgba(255,0,0,0.75)";
this.lineWidth=a.lineWidth||k("markupLinesWidth",b)||1;this.beginPath();this.arc(c-b.ls,e-b.ls,1.65*d/2,0,2*Math.PI,!0);this.stroke()}}},LB:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;this.fillStyle=a.c||p(b,a.x,a.y);this.textAlign="left";this.font=Math.round(1.3*d)+"px verdana";1==(a.text+"").length?this.fillText(a.text,c-.45*d,e+.45*d,1.4*d):this.fillText(a.text,c-.72*d,e+.45*d,1.4*d)}},grid:{draw:function(a,b){if(!z(b,a.x,a.y)&&!a._nodraw){var c=b.getX(a.x);a=b.getY(a.y);
b=b.stoneRadius;this.clearRect(c-b,a-b,2*b,2*b)}},clear:function(a,b){z(b,a.x,a.y)||(a._nodraw=!0,G(b,"grid"),delete a._nodraw)}}},LB2:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;this.fillStyle=a.c||p(b,a.x,a.y);this.textAlign="left";this.font=Math.round(1.3*d)+"px verdana";1==(a.text+"").length?this.fillText(a.text,c-.45*d,e+.45*d,1.4*d):this.fillText(a.text,c-.72*d,e+.45*d,1.4*d)}},grid:{draw:function(a,b){if(!z(b,a.x,a.y)&&!a._nodraw){var c=b.getX(a.x);a=b.getY(a.y);
b=b.stoneRadius;this.clearRect(c-b,a-b,2*b,2*b)}},clear:function(a,b){z(b,a.x,a.y)||(a._nodraw=!0,G(b,"grid"),delete a._nodraw)}}},SQ:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=Math.round(b.stoneRadius);this.strokeStyle=a.c||p(b,a.x,a.y);this.lineWidth=a.lineWidth||k("markupLinesWidth",b)||1;this.beginPath();this.rect(Math.round(c-d/2)-b.ls,Math.round(e-d/2)-b.ls,d,d);this.stroke()}}},TRS:{stone:{draw:function(a,b){var c=b.getX(a.x);a=b.getY(a.y);var e=b.stoneRadius;this.fillStyle=
"red";this.beginPath();this.moveTo(c-b.ls+e/2,a-b.ls+.3*e);this.moveTo(c-b.ls+e/2,a-b.ls+.3*e);this.lineTo(c-b.ls,a-b.ls-.5*e);this.lineTo(c-b.ls-e/2,a-b.ls+.3*e);this.fill()}}},BM:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;var f=this.createRadialGradient(c-2*d/5,e-2*d/5,d/3,c-d/5,e-d/5,5*d/5);if(a.c){if(a.c==g.W){var n=!1;f=this.createRadialGradient(c-2*d/5,e-2*d/5,d/3,c-d/5,e-d/5,5*d/5);f.addColorStop(0,"#fff");f.addColorStop(1,"#aaa")}else n=!0,f=this.createRadialGradient(c-
2*d/5,e-2*d/5,1,c-d/5,e-d/5,4*d/5),f.addColorStop(0,"#666"),f.addColorStop(1,"#000");this.beginPath();this.fillStyle=f;this.arc(c-b.ls,e-b.ls,Math.max(0,d-.5),0,2*Math.PI,!0);this.fill();this.fillStyle=a.c==g.W?"black":"white"}else 2<=a.percentplayouts?f.addColorStop(0,"rgb(0,240,255)"):.3<=a.percentplayouts?f.addColorStop(0,"rgba(0,240,0,"+Math.sqrt(a.percentplayouts)+")"):f.addColorStop(0,"rgba(255,70,0,"+(.2>Math.sqrt(a.percentplayouts)?.2:Math.sqrt(a.percentplayouts))+")");this.beginPath();this.fillStyle=
f;this.arc(c-b.ls,e-b.ls,Math.max(0,d-.5),0,2*Math.PI,!0);this.fill();a.c&&(this.strokeStyle="rgb(255,0,0)",this.lineWidth=g.isPC?1.7:a.lineWidth||k("markupLinesWidth",b)||1,this.beginPath(),g.isPC?this.arc(c-b.ls,e-b.ls,d,0,2*Math.PI,!0):this.arc(c-b.ls,e-b.ls,d+1,0,2*Math.PI,!0),this.stroke());this.fillStyle=n?"white":"black";b=a.playouts;b=1E6<=b?(b/1E5/10).toFixed(1)+"m":1E3<=b?(b/1E3).toFixed(1)+"k":b;this.font="bold "+Math.round(.75*d)+"px verdana";g.kataShowMean&&a.scoreMean?this.fillText(a.scoreMean.toFixed(1),
c-.75*d,e+.63*d,1.4*d):g.DZ&&g.kataShowMean||(10>a.playouts?this.fillText(b,c-.3*d,e+.63*d,1.45*d):100>a.playouts?this.fillText(b,c-.6*d,e+.63*d,1.45*d):this.fillText(b,c-.7*d,e+.63*d,1.45*d));this.fillText(a.winrate.toFixed(1),c-.75*d,e-.18*d,1.4*d)}},shadow:l},TR:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;this.strokeStyle=a.c||p(b,a.x,a.y);this.lineWidth=a.lineWidth||k("markupLinesWidth",b)||1;this.beginPath();this.moveTo(c-b.ls,e-b.ls-Math.round(d/2));this.lineTo(Math.round(c-
d/2)-b.ls,Math.round(e+d/3)+b.ls);this.lineTo(Math.round(c+d/2)+b.ls,Math.round(e+d/3)+b.ls);this.closePath();this.stroke()}}},MS:{stone:{draw:function(a,b){var c=b.getX(a.x);a=b.getY(a.y);var e=b.stoneRadius;var d=this.createRadialGradient(c-2*e/5,a-2*e/5,1,c-e/5,a-e/5,4*e/5);d.addColorStop(0,"rgba(255,0,0,0.8)");this.beginPath();this.strokeStyle=d;this.arc(c-b.ls,a-b.ls,Math.max(0,e-.5),0,2*Math.PI,!0);this.lineWidth=4;this.fill()}}},MA:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),
d=b.stoneRadius;this.strokeStyle=a.c||p(b,a.x,a.y);this.lineCap="round";this.lineWidth=2*(a.lineWidth||k("markupLinesWidth",b)||1)-1;this.beginPath();this.moveTo(Math.round(c-d/2),Math.round(e-d/2));this.lineTo(Math.round(c+d/2),Math.round(e+d/2));this.moveTo(Math.round(c+d/2)-1,Math.round(e-d/2));this.lineTo(Math.round(c-d/2)-1,Math.round(e+d/2));this.stroke();this.lineCap="butt"}}},SL:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;this.fillStyle=a.c||p(b,a.x,a.y);this.beginPath();
this.rect(c-d/2,e-d/2,d,d);this.fill()}}},SM:{stone:{draw:function(a,b){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;this.strokeStyle=a.c||p(b,a.x,a.y);this.lineWidth=2*(a.lineWidth||k("markupLinesWidth",b)||1);this.beginPath();this.arc(c-d/3,e-d/3,d/6,0,2*Math.PI,!0);this.stroke();this.beginPath();this.arc(c+d/3,e-d/3,d/6,0,2*Math.PI,!0);this.stroke();this.beginPath();this.moveTo(c-d/1.5,e);this.bezierCurveTo(c-d/1.5,e+d/2,c+d/1.5,e+d/2,c+d/1.5,e);this.stroke()}}},outline:{stone:{draw:function(a,
b){this.globalAlpha=a.alpha?a.alpha:.3;a.stoneStyle?h.drawHandlers[a.stoneStyle].stone.draw.call(this,a,b):b.stoneHandler.stone.draw.call(this,a,b);this.globalAlpha=1}}},variation:{stone:{draw:function(a,b){if(!(g.display_var_length&&0<g.display_var_length&&a.num>g.display_var_length)){var c=b.getX(a.x),e=b.getY(a.y),d=b.stoneRadius;if(a.c==g.W&&0!=a.num%2||a.c==g.B&&0==a.num%2){var f=!1;var n=this.createRadialGradient(c-2*d/5,e-2*d/5,d/3,c-d/5,e-d/5,5*d/5);n.addColorStop(0,"#fff");n.addColorStop(1,
"#aaa")}else f=!0,n=this.createRadialGradient(c-2*d/5,e-2*d/5,1,c-d/5,e-d/5,4*d/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000");this.beginPath();this.fillStyle=n;this.arc(c-b.ls,e-b.ls,Math.max(0,d-.5),0,2*Math.PI,!0);this.fill();this.fillStyle=a.c==g.W?"black":"white";this.fillStyle=a.num==g.display_var_length&&0<g.var_length?"rgb(255,0,0)":f?"white":"black";this.font=Math.round(1.3*d)+"px verdana";10>a.num?this.fillText(a.num,c-.45*d,e+.45*d,1.4*d):this.fillText(a.num,c-.72*d,e+.45*d,1.4*d)}}},
shadow:l},mini:{stone:{draw:function(a,b){b.stoneRadius/=2;a.stoneStyle?h.drawHandlers[a.stoneStyle].stone.draw.call(this,a,b):b.stoneHandler.stone.draw.call(this,a,b);b.stoneRadius*=2}}}};h.coordinates={grid:{draw:function(a,b){this.fillStyle=k("coordinatesColor",b);this.textBaseline="middle";this.textAlign="center";this.font=b.stoneRadius+"px "+(b.font||"");var c=b.getX(-.75);var e=b.getX(b.size-.25);var d=b.getY(-.75);var f=b.getY(b.size-.25);for(var g=0;g<b.size;g++){a=g+65;73<=a&&a++;var h=b.getY(g);
this.fillText(b.size-g,c,h);this.fillText(b.size-g,e,h);h=b.getX(g);this.fillText(String.fromCharCode(a),h,d);this.fillText(String.fromCharCode(a),h,f)}this.fillStyle="black"}}};h.CanvasLayer=function(){this.element=document.createElement("canvas");this.context=this.element.getContext("2d");this.pixelRatio=y.devicePixelRatio||1;1<this.pixelRatio&&this.context.scale(this.pixelRatio,this.pixelRatio)};h.CanvasLayer.prototype={constructor:h.CanvasLayer,setDimensions:function(a,b){this.element.width=a;
this.element.style.width=a/this.pixelRatio+"px";this.element.height=b;this.element.style.height=b/this.pixelRatio+"px"},appendTo:function(a,b){this.element.style.position="absolute";this.element.style.zIndex=b;a.appendChild(this.element)},removeFrom:function(a){a.removeChild(this.element)},getContext:function(){return this.context},draw:function(a){},clear:function(){this.context.clearRect(0,0,this.element.width,this.element.height)}};h.GridLayer=g.extendClass(h.CanvasLayer,function(){this.super.call(this)});
h.GridLayer.prototype.draw=function(a){this.context.beginPath();this.context.lineWidth=k("gridLinesWidth",a);this.context.strokeStyle=k("gridLinesColor",a);var b=Math.round(a.left),c=Math.round(a.top),e=Math.round(a.fieldWidth*(a.size-1)),d=Math.round(a.fieldHeight*(a.size-1));this.context.strokeRect(b-a.ls,c-a.ls,e,d);for(var f=1;f<a.size-1;f++){var g=Math.round(a.getX(f))-a.ls;this.context.moveTo(g,c);this.context.lineTo(g,c+d);g=Math.round(a.getY(f))-a.ls;this.context.moveTo(b,g);this.context.lineTo(b+
e,g)}this.context.stroke();this.context.fillStyle=k("starColor",a);if(a.starPoints[a.size])for(var h in a.starPoints[a.size])this.context.beginPath(),this.context.arc(a.getX(a.starPoints[a.size][h].x)-a.ls,a.getY(a.starPoints[a.size][h].y)-a.ls,k("starSize",a),0,2*Math.PI,!0),this.context.fill()};h.MultipleCanvasLayer=g.extendClass(h.CanvasLayer,function(){this.init(4)});h.MultipleCanvasLayer.prototype.init=function(a){this.layers=a;this.elements=[];this.contexts=[];this.pixelRatio=y.devicePixelRatio||
1;for(var b=0;b<a;b++){var c=document.createElement("canvas");var e=c.getContext("2d");1<this.pixelRatio&&e.scale(this.pixelRatio,this.pixelRatio);this.elements.push(c);this.contexts.push(e)}};h.MultipleCanvasLayer.prototype.appendTo=function(a,b){for(var c=0;c<this.layers;c++)this.elements[c].style.position="absolute",this.elements[c].style.zIndex=b,a.appendChild(this.elements[c])};h.MultipleCanvasLayer.prototype.removeFrom=function(a){for(var b=0;b<this.layers;b++)a.removeChild(this.elements[b])};
h.MultipleCanvasLayer.prototype.getContext=function(a){return a.x%2?a.y%2?this.contexts[0]:this.contexts[1]:a.y%2?this.contexts[2]:this.contexts[3]};h.MultipleCanvasLayer.prototype.clear=function(a,b){for(a=0;a<this.layers;a++)this.contexts[a].clearRect(0,0,this.elements[a].width,this.elements[a].height)};h.MultipleCanvasLayer.prototype.setDimensions=function(a,b){for(var c=0;c<this.layers;c++)this.elements[c].width=a,this.elements[c].style.width=a/this.pixelRatio+"px",this.elements[c].height=b,this.elements[c].style.height=
b/this.pixelRatio+"px"};h.ShadowLayer=g.extendClass(h.MultipleCanvasLayer,function(a,b,c){this.init(2);this.shadowSize=b===r?1:b;this.board=a});h.ShadowLayer.prototype.getContext=function(a){return a.x%2&&a.y%2||!(a.x%2||a.y%2)?this.contexts[0]:this.contexts[1]};h.ShadowLayer.prototype.setDimensions=function(a,b){this.super.prototype.setDimensions.call(this,a,b);for(a=0;a<this.layers;a++)this.contexts[a].setTransform(1,0,0,1,Math.round(this.shadowSize*this.board.stoneRadius/7),Math.round(this.shadowSize*
this.board.stoneRadius/7))};var C=function(){return 3*this.width/(4*(this.bx+1-this.tx)+2)-this.fieldWidth*this.tx},D=function(){return 3*this.height/(4*(this.by+1-this.ty)+2)-this.fieldHeight*this.ty},u=function(a,b){for(var c,e=0;e<this.obj_arr[a][b].length;e++){var d=this.obj_arr[a][b][e];c=d.type?"string"==typeof d.type?h.drawHandlers[d.type]:d.type:this.stoneHandler;for(var f in c)if(c[f].clear)c[f].clear.call(this[f].getContext(d),d,this);else{var g=this[f].getContext(d),m=d,k=this.getX(m.x);
m=this.getY(m.y);var l=this.stoneRadius;g.clearRect(k-2*l-this.ls,m-2*l-this.ls,4*l,4*l)}}},v=function(a,b){for(var c,e=0;e<this.obj_arr[a][b].length;e++){var d=this.obj_arr[a][b][e];c=d.type?"string"==typeof d.type?h.drawHandlers[d.type]:d.type:this.stoneHandler;for(var f in c)c[f].draw.call(this[f].getContext(d),d,this)}},E=function(){this.element.style.width=this.width/this.pixelRatio+"px";this.element.style.height=this.height/this.pixelRatio+"px";this.stoneRadius=k("stoneSize",this);this.ls=k("linesShift",
this);for(var a=0;a<this.layers.length;a++)this.layers[a].setDimensions(this.width,this.height)};h.prototype={constructor:h,init:function(){this.obj_arr=[];for(var a=0;a<this.size;a++){this.obj_arr[a]=[];for(var b=0;b<this.size;b++)this.obj_arr[a][b]=[]}this.obj_list=[];this.layers=[];this.listeners=[];this.element=document.createElement("div");this.element.className="wgo-board";this.element.style.position="relative";this.background&&("#"==this.background[0]?this.element.style.backgroundColor=this.background:
(this.element.style.backgroundImage="url('"+this.background+"')",this.stoneHandler==h.drawHandlers.REALISTIC&&(this.element.style.backgroundSize="100%")));this.grid=new h.GridLayer;this.shadow=new h.ShadowLayer(this,k("shadowSize",this));this.stone=new h.MultipleCanvasLayer;this.addLayer(this.grid,100);this.addLayer(this.shadow,200);this.addLayer(this.stone,300)},setWidth:function(a){this.width=a;this.width*=this.pixelRatio;this.fieldHeight=this.fieldWidth=4*this.width/(4*(this.bx+1-this.tx)+2);this.left=
C.call(this);this.height=(this.by-this.ty+1.5)*this.fieldHeight;this.top=D.call(this);E.call(this);this.redraw()},setHeight:function(a){this.height=a;this.height*=this.pixelRatio;this.fieldWidth=this.fieldHeight=4*this.height/(4*(this.by+1-this.ty)+2);this.top=D.call(this);this.width=(this.bx-this.tx+1.5)*this.fieldWidth;this.left=C.call(this);E.call(this);this.redraw()},setDimensions:function(a,b){this.width=a||parseInt(this.element.style.width,10);this.width*=this.pixelRatio;this.height=b||parseInt(this.element.style.height,
10);this.height*=this.pixelRatio;this.fieldWidth=4*this.width/(4*(this.bx+1-this.tx)+2);this.fieldHeight=4*this.height/(4*(this.by+1-this.ty)+2);this.left=C.call(this);this.top=D.call(this);E.call(this);this.redraw()},getSection:function(){return this.section},setSection:function(a,b,c,e){this.section="object"==typeof a?a:{top:a,right:b,bottom:c,left:e};this.tx=this.section.left;this.ty=this.section.top;this.bx=this.size-1-this.section.right;this.by=this.size-1-this.section.bottom;this.setDimensions()},
setSize:function(a){a=a||19;if(a!=this.size){this.size=a;this.obj_arr=[];for(a=0;a<this.size;a++){this.obj_arr[a]=[];for(var b=0;b<this.size;b++)this.obj_arr[a][b]=[]}this.bx=this.size-1-this.section.right;this.by=this.size-1-this.section.bottom;this.setDimensions()}},redrawVar:function(){try{for(var a=0;a<this.size;a++)for(var b=0;b<this.size;b++)for(var c=this.obj_arr[a][b],e=0;e<c.length;e++)if("variation"==this.obj_arr[a][b][e].type)if(this.obj_arr[a][b][e].num<=g.display_var_length){u.call(this,
a,b);v.call(this,a,b);break}else u.call(this,a,b)}catch(d){console.log("WGo board failed to render. Error: "+d.message)}},redrawBM:function(){try{for(var a=0;a<this.size;a++)for(var b=0;b<this.size;b++)for(var c=this.obj_arr[a][b],e=0;e<c.length;e++)if("BM"==this.obj_arr[a][b][e].type){u.call(this,a,b);v.call(this,a,b);break}}catch(d){console.log("WGo board failed to render. Error: "+d.message)}},redraw:function(){try{for(var a=0;a<this.layers.length;a++)this.layers[a].clear(this),this.layers[a].draw(this);
for(a=0;a<this.size;a++)for(var b=0;b<this.size;b++)v.call(this,a,b);for(a=0;a<this.obj_list.length;a++){var c=this.obj_list[a],e=c.handler,d;for(d in e)e[d].draw.call(this[d].getContext(c.args),c.args,this)}}catch(f){console.log("WGo board failed to render. Error: "+f.message)}},getX:function(a){return this.left+a*this.fieldWidth},getY:function(a){return this.top+a*this.fieldHeight},addLayer:function(a,b){a.appendTo(this.element,b);a.setDimensions(this.width,this.height);this.layers.push(a)},removeLayer:function(a){var b=
this.layers.indexOf(a);0<=b&&(this.layers.splice(b,1),a.removeFrom(this.element))},update:function(a){var b;if(a.remove&&"all"==a.remove)this.removeAllObjects();else if(a.remove)for(b=0;b<a.remove.length;b++)this.removeObject(a.remove[b]);if(a.add)for(b=0;b<a.add.length;b++)this.addObject(a.add[b])},addObject:function(a){if(a.constructor==Array)for(var b=0;b<a.length;b++)this.addObject(a[b]);else try{u.call(this,a.x,a.y);b=this.obj_arr[a.x][a.y];if("variation"!=a.type)for(var c=0;c<b.length;c++)if(b[c].type==
a.type){b[c]=a;v.call(this,a.x,a.y);return}a.type?b.push(a):b.unshift(a);v.call(this,a.x,a.y)}catch(e){console.log("WGo board failed to render. Error: "+e.message)}},removeObject:function(a){if(a.constructor==Array)for(var b=0;b<a.length;b++)this.removeObject(a[b]);else try{for(var c=0;c<this.obj_arr[a.x][a.y].length;c++)if(this.obj_arr[a.x][a.y][c].type==a.type){b=c;break}b!==r&&(u.call(this,a.x,a.y),this.obj_arr[a.x][a.y].splice(b,1),v.call(this,a.x,a.y))}catch(e){console.log("WGo board failed to render. Error: "+
e.message)}},removeAllObjectsMoveNum:function(){for(var a=0;a<this.size;a++)for(var b=0;b<this.size;b++)for(var c=this.obj_arr[a][b],e=0;e<c.length;e++)if("LB"==this.obj_arr[a][b][e].type||"TRS"==this.obj_arr[a][b][e].type)this.removeObject(this.obj_arr[a][b][e]),e--;this.redraw()},removeAllObjectsBM:function(){for(var a=0;a<this.size;a++)for(var b=0;b<this.size;b++)for(var c=this.obj_arr[a][b],e=0;e<c.length;e++)if("BM"==this.obj_arr[a][b][e].type||"TRS"==this.obj_arr[a][b][e].type||"LB"==this.obj_arr[a][b][e].type)this.removeObject(this.obj_arr[a][b][e]),
e--},removeAllObjectsVR:function(){for(var a=0;a<this.size;a++)for(var b=0;b<this.size;b++)for(var c=this.obj_arr[a][b],e=0;e<c.length;e++)"variation"==this.obj_arr[a][b][e].type&&(this.removeObject(this.obj_arr[a][b][e]),e--)},removeAllObjectsOutLine:function(){for(var a=0;a<this.size;a++)for(var b=0;b<this.size;b++)for(var c=this.obj_arr[a][b],e=0;e<c.length;e++)if("outline"==this.obj_arr[a][b][e].type||"CR2"==this.obj_arr[a][b][e].type)this.removeObject(this.obj_arr[a][b][e]),e--},removeObjectsAt:function(a,
b){this.obj_arr[a][b].length&&(u.call(this,a,b),this.obj_arr[a][b]=[])},removeAllObjects:function(){this.obj_arr=[];for(var a=0;a<this.size;a++){this.obj_arr[a]=[];for(var b=0;b<this.size;b++)this.obj_arr[a][b]=[]}this.redraw()},addCustomObject:function(a,b){this.obj_list.push({handler:a,args:b});this.redraw()},removeCustomObject:function(a,b){for(var c=0;c<this.obj_list.length;c++){var e=this.obj_list[c];if(e.handler==a&&e.args==b)return this.obj_list.splice(c,1),this.redraw(),!0}return!1},addEventListener:function(a,
b){var c=this,e={type:a,callback:b,handleEvent:function(a){var d=a.offsetX*c.pixelRatio;d/=g.trueScale;d-=c.left;d/=c.fieldWidth;d=Math.round(d);var e=a.offsetY*c.pixelRatio;e/=g.trueScale;e-=c.top;e/=c.fieldHeight;e=Math.round(e);b(d>=c.size?-1:d,e>=c.size?-1:e,a)}};this.element.addEventListener(a,e,!0);this.listeners.push(e)},removeEventListener:function(a,b){for(var c=0;c<this.listeners.length;c++){var e=this.listeners[c];if(e.type==a&&e.callback==b)return this.element.removeEventListener(e.type,
e,!0),this.listeners.splice(c,1),!0}return!1},getState:function(){return{objects:g.clone(this.obj_arr),custom:g.clone(this.obj_list)}},restoreState:function(a){this.obj_arr=a.objects||this.obj_arr;this.obj_list=a.custom||this.obj_list;this.redraw()}};h.default={size:19,width:0,height:0,font:"Calibri",lineWidth:1,autoLineWidth:!1,starPoints:{5:[{x:2,y:2}],7:[{x:3,y:3}],8:[{x:2,y:2},{x:5,y:2},{x:2,y:5},{x:5,y:5}],9:[{x:2,y:2},{x:6,y:2},{x:4,y:4},{x:2,y:6},{x:6,y:6}],10:[{x:2,y:2},{x:7,y:2},{x:2,y:7},
{x:7,y:7}],11:[{x:2,y:2},{x:8,y:2},{x:5,y:5},{x:2,y:8},{x:8,y:8}],12:[{x:3,y:3},{x:8,y:3},{x:3,y:8},{x:8,y:8}],13:[{x:3,y:3},{x:9,y:3},{x:6,y:6},{x:3,y:9},{x:9,y:9}],14:[{x:3,y:3},{x:10,y:3},{x:3,y:10},{x:10,y:10}],15:[{x:3,y:3},{x:11,y:3},{x:7,y:7},{x:3,y:11},{x:11,y:11}],16:[{x:3,y:3},{x:12,y:3},{x:3,y:12},{x:12,y:12}],17:[{x:3,y:3},{x:8,y:3},{x:13,y:3},{x:3,y:8},{x:8,y:8},{x:13,y:8},{x:3,y:13},{x:8,y:13},{x:13,y:13}],18:[{x:3,y:3},{x:14,y:3},{x:3,y:14},{x:14,y:14}],19:[{x:3,y:3},{x:9,y:3},{x:15,
y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],20:[{x:3,y:3},{x:16,y:3},{x:3,y:16},{x:16,y:16}],21:[{x:3,y:3},{x:10,y:3},{x:17,y:3},{x:3,y:10},{x:10,y:10},{x:17,y:10},{x:3,y:17},{x:10,y:17},{x:17,y:17}]},stoneHandler:h.drawHandlers.NORMAL,starSize:1,shadowSize:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:g.DIR+"textures/wood1.jpg",whiteStoneGraphic:[g.DIR+"stones/white0.png"],blackStoneGraphic:[g.DIR+"stones/black0.png"],theme:{}};g.Board=h;var t=function(a){this.size=
a||19;this.schema=[];for(a=0;a<this.size*this.size;a++)this.schema[a]=0};t.prototype={constructor:g.Position,get:function(a,b){return 0>a||0>b||a>=this.size||b>=this.size?r:this.schema[a*this.size+b]},set:function(a,b,c){this.schema[a*this.size+b]=c;return this},clear:function(){for(var a=0;a<this.size*this.size;a++)this.schema[a]=0;return this},clone:function(){var a=new t(this.size);a.schema=this.schema.slice(0);return a},compare:function(a){for(var b=[],c=[],e=0;e<this.size*this.size;e++)this.schema[e]&&
!a.schema[e]?c.push({x:Math.floor(e/this.size),y:e%this.size}):this.schema[e]!=a.schema[e]&&b.push({x:Math.floor(e/this.size),y:e%this.size,c:a.schema[e]});return{add:b,remove:c}}};g.Position=t;l=function(a,b,c,e){this.size=a||19;this.repeating=b===r?"KO":b;this.allow_rewrite=c||!1;this.allow_suicide=e||!1;this.stack=[];this.stack[0]=new t(this.size);this.stack[0].capCount={black:0,white:0};this.turn=g.B;Object.defineProperty(this,"position",{get:function(){return this.stack[this.stack.length-1]},
set:function(a){this.stack[this.stack.length-1]=a}})};var w=function(a,b,c,e,d){0<=c&&c<a.size&&0<=e&&e<a.size&&a.get(c,e)==d&&(a.set(c,e,0),b.push({x:c,y:e}),w(a,b,c,e-1,d),w(a,b,c,e+1,d),w(a,b,c-1,e,d),w(a,b,c+1,e,d))},x=function(a,b,c,e,d){if(0>c||c>=a.size||0>e||e>=a.size)return!0;if(0==a.get(c,e))return!1;if(1==b.get(c,e)||a.get(c,e)==-d)return!0;b.set(c,e,!0);return x(a,b,c,e-1,d)&&x(a,b,c,e+1,d)&&x(a,b,c-1,e,d)&&x(a,b,c+1,e,d)},q=function(a,b,c,e){var d=[];if(0<=b&&b<a.size&&0<=c&&c<a.size&&
a.get(b,c)==e){var f=new t(a.size);x(a,f,b,c,e)&&w(a,d,b,c,e)}return d};l.prototype={constructor:l,getPosition:function(){return this.stack[this.stack.length-1]},play:function(a,b,c,e){if(!this.isOnBoard(a,b))return 1;if(!this.allow_rewrite&&0!=this.position.get(a,b))return 2;g.curPlayer.kifuReader.path.m<g.editMoveNumStart&&(g.editMoveNumStart=g.curPlayer.kifuReader.path.m);c||(c=this.turn);var d=this.position.clone();d.set(a,b,c);var f=c,h=q(d,a-1,b,-c).concat(q(d,a+1,b,-c),q(d,a,b-1,-c),q(d,a,
b+1,-c));if(!h.length){var k=new t(this.size);if(x(d,k,a,b,c))if(this.allow_suicide)f=-c,w(d,h,a,b,c);else return 3}if(k=this.repeating){a:{if("KO"==this.repeating&&0<=this.stack.length-2)var l=this.stack.length-2;else if("ALL"==this.repeating)l=0;else{a=!0;break a}for(var p=this.stack.length-2;p>=l;p--)if(this.stack[p].get(a,b)==d.get(a,b)){k=!0;for(var r=0;r<this.size*this.size;r++)if(this.stack[p].schema[r]!=d.schema[r]){k=!1;break}if(k){a=!1;break a}}a=!0}k=!a}if(k)return 4;if(e)return!1;d.color=
c;d.capCount={black:this.position.capCount.black,white:this.position.capCount.white};f==g.B?d.capCount.black+=h.length:d.capCount.white+=h.length;this.pushPosition(d);this.turn=-c;return h},pass:function(a){this.pushPosition();a?(this.position.color=a,this.turn=-a):(this.position.color=this.turn,this.turn=-this.turn)},isValid:function(a,b,c){return"number"!=typeof this.play(a,b,c,!0)},isOnBoard:function(a,b){return 0<=a&&0<=b&&a<this.size&&b<this.size},addStone:function(a,b,c){return this.isOnBoard(a,
b)&&0==this.position.get(a,b)?(this.position.set(a,b,c||0),!0):!1},removeStone:function(a,b){return this.isOnBoard(a,b)&&0!=this.position.get(a,b)?(this.position.set(a,b,0),!0):!1},setStone:function(a,b,c){return this.isOnBoard(a,b)?(this.position.set(a,b,c||0),!0):!1},getStone:function(a,b){return this.isOnBoard(a,b)?this.position.get(a,b):0},pushPosition:function(a){a||(a=this.position.clone(),a.capCount={black:this.position.capCount.black,white:this.position.capCount.white},a.color=this.position.color);
this.stack.push(a);a.color&&(this.turn=-a.color);return this},popPosition:function(){var a=null;0<this.stack.length&&(a=this.stack.pop(),this.turn=0==this.stack.length?g.B:this.position.color?-this.position.color:-this.turn);return a},firstPosition:function(){this.stack=[];this.stack[0]=new t(this.size);this.stack[0].capCount={black:0,white:0};this.turn=g.B;return this},getCaptureCount:function(a){return a==g.B?this.position.capCount.black:this.position.capCount.white},validatePosition:function(){for(var a,
b,c=0,e=0,d=[],f=this.position.clone(),h=0;h<this.size;h++)for(var k=0;k<this.size;k++)if(a=this.position.get(h,k))b=d.length,d=d.concat(q(f,h-1,k,-a),q(f,h+1,k,-a),q(f,h,k-1,-a),q(f,h,k+1,-a)),a==g.B?e+=d-b:c+=d-b;this.position.capCount.black+=e;this.position.capCount.white+=c;this.position.schema=f.schema;return d}};g.Game=l;y.WGo=g;g.Utf8ToGb2312=function(a){var b="";var c=a.indexOf("%");if(-1==c)return a;for(;-1!=c;){if(3>c){b+=a.substr(0,c-1);a=a.substr(c+1,a.length-c);var e=a.substr(0,2);a=
a.substr(2,a.length-2);if(parseInt("0x"+e)&0)b+=String.fromCharCode(parseInt("0x"+e));else{if(parseInt("0x"+e)&0)c=a.substr(1,2),a=a.substr(3,a.length-3),e=(parseInt("0x"+e)&31)<<6,e|=parseInt("0x"+c)&63;else{c=a.substr(1,2);a=a.substr(3,a.length-3);var d=a.substr(1,2);a=a.substr(3,a.length-3);e=(parseInt("0x"+e)&15)<<12;e|=(parseInt("0x"+c)&63)<<6;e|=parseInt("0x"+d)&63}b+=String.fromCharCode(e)}}else b+=a.substring(0,c),a=a.substring(c);c=a.indexOf("%")}return b+a}})(window);
